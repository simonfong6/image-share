<!doctype html>
<html lang="en">
  <head>
    <title>Image Clipboard</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, viewport-fit=cover" />
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/app.css?v=1">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" SameSite=None Secure>

    <script>
      function copyLink(elementId) {
        // Grab the text vaue from the targeted element.
        let copyFromElement = document.getElementById(elementId);
        let copyText = copyFromElement.text;

        console.log(copyFromElement);

        console.log(copyText);
  
        // Remove extra whitespace.
        copyText = copyText.trim();
  
        // Create dummy text element with copy value.
        let input = document.createElement("input");
        input.type = "text";
        input.value = copyText;
  
        // Add it to the page, copy the value.
        document.body.appendChild(input); 
        input.select();
        document.execCommand("copy");
  
        // Remove the dummy element.
        document.body.removeChild(input);
      }

      function copyLinkTag(elementId) {
        // Grab the text vaue from the targeted element.
        let copyFromElement = document.getElementById(elementId);
        let copyText = copyFromElement.text;

        console.log(copyFromElement);

        console.log(copyText);
  
        // Remove extra whitespace.
        copyText = copyText.trim();
  
        // Create dummy text element with copy value.
        let input = document.createElement("input");
        input.type = "text";
        input.value = `<img src="${copyText}" />`;
  
        // Add it to the page, copy the value.
        document.body.appendChild(input); 
        input.select();
        document.execCommand("copy");
  
        // Remove the dummy element.
        document.body.removeChild(input);
      }
    </script>
  </head>

  <body>

    <nav class="header navbar navbar-dark bg-success fixed-top">
      <a class="navbar-brand" href="/">Image Clipboard Example</a>
      <ul class="navbar-nav pull-right">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/martindrapeau/image-clipboard">Code on GitHub</a>
        </li>
      </ul>
    </nav>
    <div>
      <input id="the-file" name="file" type="file"> <br/>
      <button onclick="sendFile()">Send File</button>
      <button onclick="sendFileFromPaste()">Send Pasted File</button>
    </div>

    <div class="content">
      <div class="message"></div>
      <img/>
      <canvas></canvas>
    </div>

    <nav class="footer navbar fixed-bottom navbar-light bg-light">
      <small class="message"></small>
      <small class="mouse-position pull-right"></small>
      <small id="image-url"></small>
      <button class="copy-button btn btn-light" onclick="copyLink('image-url-link')">
        <i class="fa fa-copy"></i>
      </button>
      <button class="copy-button btn btn-light" onclick="copyLinkTag('image-url-link')">
        &lt;img&gt; <i class="fa fa-copy"></i>
      </button>
      <small class="image-size pull-right"></small>
      <small class="pull-right">Coded by <a href="https://medium.com/@martindrapeau">Martin Drapeau</a></small>
    </nav>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="/static/app.js?v=1"></script>
  </body>
</html>